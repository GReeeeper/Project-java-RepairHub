public boolean hasOwner() {
    return userDAO.getAllUsers()
            .stream()
            .anyMatch(u -> u.getRole() == User.Role.OWNER || u.getRole() == User.Role.BOTH);
}

public void signUpOwner(String username,
                        String email,
                        String phone,
                        String shopName,
                        String password,
                        String confirmPassword,
                        boolean ownerIsAlsoRepairer) throws Exception {

    if (username == null || username.isBlank()) throw new Exception("Username required");
    if (email == null || email.isBlank()) throw new Exception("Email required");
    if (phone == null || phone.isBlank()) throw new Exception("Phone required");
    if (shopName == null || shopName.isBlank()) throw new Exception("Shop name required");
    if (password == null || confirmPassword == null || !password.equals(confirmPassword))
        throw new Exception("Passwords do not match");

    if (userDAO.getUserByUsername(username) != null)
        throw new Exception("Username already exists!");

    // USER CREATION
    User.Role role = ownerIsAlsoRepairer ? User.Role.BOTH : User.Role.OWNER;
    User owner = new User(username, password, email, phone, role);
    userDAO.addUser(owner);

    // SHOP CREATION
    Shop shop = new Shop(shopName, owner);
    shopDAO.addShop(shop);
    owner.setShop(shop);
}

public void addRepairer(String username, String password, String email, String phone, Shop shop) throws Exception {
    if (username.isBlank() || password.isBlank()) throw new Exception("Username and password required");

    if (userDAO.getUserByUsername(username) != null)
        throw new Exception("Username already exists!");

    User repairer = new User(username, password, email, phone, User.Role.REPAIRER);
    userDAO.addUser(repairer);

    shop.addRepairer(repairer);
}
